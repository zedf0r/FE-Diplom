import{j as _,Y as R,q as g,T as I,Z as L,Q as w,$ as W,W as D,a0 as F,B as Z,f as u,a1 as H,a2 as q,a3 as G,a4 as P,U as Q}from"./index-TsbhEDbY.js";import{S as U,R as Y,C as J,L as K,W as X,F as _1}from"./ScheduleSlider-C9G6fAM3.js";import{T as e1,R as t1}from"./CardRoutes-Bgvv39q0.js";const n1=({size:e})=>_.jsxs("svg",{width:e.width,height:e.height,viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("path",{d:"M15.1454 29.9951C7.11437 30.2063 0.215587 23.5269 0.00493763 15.3691C-0.205712 7.13207 6.35076 0.188668 14.4871 0.00386308C22.9131 -0.180942 29.8119 6.28724 29.9962 14.6035C30.1805 22.9989 23.6241 29.8103 15.1454 29.9951ZM27.4421 15.0259C27.4684 8.1881 21.9389 2.59114 15.0664 2.53834C8.29927 2.45913 2.61173 8.0825 2.5854 14.8939C2.53274 21.7845 8.16762 27.4607 14.9874 27.4607C21.8072 27.4607 27.4157 21.8373 27.4421 15.0259Z",fill:"#FFA800"}),_.jsx("path",{d:"M15.3296 14.3923C17.3571 13.4947 19.1476 12.6762 20.9381 11.8842C21.2278 11.7522 21.5174 11.5146 21.8071 11.541C22.2284 11.5674 22.6233 11.805 23.0446 11.937C22.8603 12.333 22.8077 12.9138 22.4917 13.0722C21.4648 13.6795 20.3589 14.1547 19.3056 14.6563C17.989 15.2899 16.6725 15.9499 15.3559 16.5571C14.171 17.1116 13.5917 16.7684 13.5654 15.5011C13.5391 12.6762 13.5127 9.85136 13.5917 7.02647C13.5917 6.63046 14.1447 6.23445 14.4343 5.83844C14.7503 6.23445 15.3033 6.60406 15.3033 7.00007C15.3822 9.37614 15.3296 11.7522 15.3296 14.3923Z",fill:"#FFA800"})]}),s1=({size:e})=>_.jsx("svg",{width:e.width,height:e.height,viewBox:"0 0 22 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{d:"M20.5451 12.1613C20.6816 12.5772 20.8554 13.1645 21.054 13.7395C21.3642 14.6815 20.7313 15.6235 19.7261 15.6235C14.4765 15.6357 9.21459 15.6357 3.96506 15.6113C2.1904 15.599 0.936965 14.7304 0.65153 13.2256C0.515017 12.5283 0.589479 11.7575 0.725991 11.0602C1.17276 8.68681 1.69399 6.32564 2.20281 3.95225C2.28968 3.53629 2.42619 3.12033 2.61235 2.74108C2.99706 1.9581 3.56793 1.43204 4.52352 1.28523C5.33019 1.16289 6.11203 0.857043 6.89388 0.600129C7.39029 0.428853 7.84946 0.404385 8.30864 0.698001C9.15254 1.24853 10.0709 1.38311 11.0761 1.35864C13.31 1.3097 15.5438 1.3464 17.7777 1.35864C18.5719 1.35864 18.5719 1.37087 18.7953 2.10491C19.0807 3.08363 19.3537 4.06235 19.6516 5.04107C19.7261 5.26129 19.8874 5.45703 20.0239 5.65277C20.3342 6.08096 20.7437 6.44798 20.9423 6.91288C21.4759 8.13628 21.4883 9.45755 21.3394 10.7666C21.2897 11.1948 20.8926 11.574 20.5451 12.1613ZM1.63194 10.1794C2.72404 9.33521 3.87819 9.27404 5.06957 9.28627C9.78546 9.29851 14.5013 9.28627 19.2048 9.29851C19.664 9.29851 20.1356 9.35968 20.7313 9.39638C20.6196 8.72351 20.5575 8.09958 20.3962 7.50011C20.0487 6.20331 19.1924 5.70171 17.8645 6.03203C16.9462 6.26448 16.0154 6.50916 15.1715 6.90064C12.6522 8.06287 10.0337 7.87936 7.4027 7.54905C7.11726 7.51234 7.00557 7.36554 7.0428 7.09639C7.08003 6.79054 7.11726 6.49692 7.14208 6.19107C7.21654 5.11448 7.30341 4.03789 7.36547 2.96129C7.39029 2.423 7.36547 1.87247 7.36547 1.24853C7.10485 1.33417 6.89388 1.39534 6.6829 1.45651C5.96311 1.65225 5.25573 1.8847 4.53593 2.03151C3.95265 2.14161 3.54311 2.43523 3.31973 2.94906C3.14599 3.34055 3.00947 3.74427 2.91019 4.16023C2.72404 4.9065 2.58753 5.66501 2.42619 6.42352C2.17799 7.63468 1.91737 8.83362 1.63194 10.1794ZM11.6594 14.9139C14.2035 14.9139 16.7476 14.9139 19.2917 14.9139C19.453 14.9139 19.6268 14.9262 19.7881 14.9017C20.148 14.8527 20.4459 14.498 20.3962 14.1676C20.3466 13.8251 20.1356 13.6293 19.7633 13.6416C19.602 13.6416 19.4282 13.6416 19.2669 13.6416C14.4889 13.6538 9.711 13.666 4.93306 13.666C4.64762 13.666 4.34978 13.6905 4.06434 13.6538C3.46865 13.5926 3.03429 13.0788 3.0467 12.4671C3.05911 11.8799 3.43142 11.4884 4.05193 11.4517C4.68486 11.415 5.33019 11.3783 5.97552 11.3661C10.5425 11.3171 15.1094 11.2804 19.6764 11.2315C19.7757 11.2315 19.8874 11.2315 19.9867 11.2192C20.3466 11.1825 20.6444 10.9012 20.6568 10.6075C20.6568 10.2161 20.3714 10.0937 20.0611 10.0081C19.9246 9.97138 19.7757 9.97138 19.6268 9.97138C14.4393 9.97138 9.23941 9.95915 4.05193 9.99585C3.51829 9.99585 2.94742 10.1916 2.47583 10.4485C0.999016 11.2682 0.874914 13.4091 2.20281 14.3634C2.74886 14.7549 3.4066 14.8772 4.07675 14.8772C6.60844 14.9139 9.14013 14.9139 11.6594 14.9139ZM8.14731 1.46874C8.03562 3.32831 7.92393 5.09001 7.81223 6.81501C11.163 7.54905 14.1911 6.79054 17.0827 5.37139C14.0173 4.45384 11.2002 2.85119 8.14731 1.46874ZM19.7136 11.9655C19.453 11.9655 19.2296 11.9655 18.9939 11.9655C17.1323 11.99 15.2708 12.0389 13.4092 12.0512C10.5425 12.0756 7.67572 12.0756 4.79655 12.1001C4.54834 12.1001 4.28773 12.1001 4.06434 12.1857C3.94024 12.2347 3.77891 12.4426 3.79132 12.565C3.80373 12.6996 3.96506 12.8708 4.10157 12.9442C4.21327 13.0054 4.38701 12.9687 4.52352 12.9687C9.52485 12.9565 14.5386 12.9565 19.5399 12.9442C19.6888 12.9442 19.8377 12.9075 20.0115 12.8953C19.9494 12.6873 19.9122 12.5283 19.8626 12.3692C19.8253 12.2469 19.7757 12.1368 19.7136 11.9655ZM11.3243 2.06821C11.3119 2.10491 11.3119 2.15385 11.2995 2.19055C13.7319 3.35278 16.1519 4.53948 18.9194 5.11448C18.6464 4.14799 18.4106 3.24267 18.1127 2.36183C18.0631 2.21502 17.7652 2.08044 17.5791 2.08044C15.4942 2.06821 13.4092 2.06821 11.3243 2.06821Z",fill:"currentColor"})}),a1=({size:e})=>_.jsxs("svg",{width:e.width,height:e.height,viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("path",{d:"M2.39887 0.526367C2.65965 0.526367 2.84931 0.526367 3.03897 0.526367C7.78042 0.526367 12.5219 0.526367 17.2633 0.526367C18.745 0.526367 19.4681 1.25024 19.4681 2.75733C19.4681 3.56428 19.48 4.38309 19.4681 5.19003C19.4562 6.37671 18.6739 7.15992 17.5004 7.17179C16.9077 7.18366 16.3269 7.17179 15.6868 7.17179C15.6868 8.0974 15.6868 8.95182 15.6868 9.81809C15.6749 12.1915 14.0747 13.8053 11.7158 13.8172C9.93778 13.8172 8.15973 13.8291 6.38169 13.8172C4.04652 13.8053 2.42258 12.2033 2.42258 9.87743C2.38702 6.78019 2.39887 3.70668 2.39887 0.526367ZM15.7223 2.43693C15.7223 3.36254 15.7223 4.30002 15.7223 5.2375C16.3387 5.2375 16.9314 5.2375 17.5241 5.2375C17.5241 4.28815 17.5241 3.36254 17.5241 2.43693C16.9077 2.43693 16.3387 2.43693 15.7223 2.43693Z",fill:"currentColor"}),_.jsx("path",{d:"M17.5363 15.7513C17.5363 16.3684 17.5363 16.9618 17.5363 17.5788C11.8584 17.5788 6.20426 17.5788 0.526367 17.5788C0.526367 16.9618 0.526367 16.3803 0.526367 15.7513C6.18055 15.7513 11.8347 15.7513 17.5363 15.7513Z",fill:"currentColor"})]}),c1=({size:e})=>_.jsxs("svg",{width:e.width,height:e.height,viewBox:"0 0 21 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("path",{d:"M8.0993 11.641C7.71469 11.8691 7.35884 12.0788 7.00299 12.2885C6.38474 12.6527 5.77369 13.0205 5.15184 13.3774C5.02963 13.4473 4.9865 13.5319 4.97931 13.6643C4.93258 14.3964 4.87867 15.1321 4.82834 15.8642C4.79959 16.2946 4.49406 16.5889 4.08788 16.5742C3.69249 16.5595 3.40134 16.2284 3.41572 15.798C3.4301 15.4632 3.45526 15.1248 3.47683 14.79C3.48402 14.6576 3.4912 14.5251 3.49839 14.3633C3.39056 14.4258 3.30789 14.47 3.22521 14.5178C2.68245 14.8378 2.13969 15.1616 1.59333 15.4816C1.31296 15.6435 0.989462 15.603 0.759416 15.3897C0.547343 15.1947 0.453887 14.8489 0.590477 14.584C0.66596 14.4369 0.795361 14.2934 0.935545 14.2051C1.49269 13.8556 2.06061 13.5319 2.62494 13.1971C2.67526 13.1677 2.72558 13.1346 2.79388 13.0941C2.36973 12.8807 1.96715 12.6821 1.56457 12.4798C1.21232 12.2995 1.05776 11.9537 1.1584 11.5969C1.28061 11.1738 1.73351 10.9604 2.13969 11.1554C2.80107 11.4718 3.45526 11.8029 4.10945 12.134C4.23526 12.2002 4.33231 12.1965 4.45452 12.1229C5.3747 11.5711 6.29848 11.0303 7.21866 10.4859C7.26898 10.4564 7.3193 10.4233 7.39479 10.3755C7.1935 10.2578 7.01018 10.1474 6.82686 10.0407C6.03968 9.57354 5.24889 9.11369 4.4653 8.63913C4.32871 8.55452 4.22447 8.56188 4.08788 8.63177C3.45167 8.95918 2.81185 9.27556 2.16844 9.58825C1.78743 9.77587 1.37766 9.63975 1.20153 9.27556C1.01822 8.904 1.16559 8.48462 1.5502 8.28597C1.90245 8.10203 2.25831 7.92913 2.61056 7.74887C2.66448 7.72312 2.7148 7.69369 2.78669 7.65322C2.24393 7.33317 1.72273 7.02415 1.20153 6.71514C1.10448 6.65628 1.00384 6.6011 0.906789 6.53856C0.547343 6.31783 0.428726 5.89478 0.622827 5.54161C0.820522 5.18477 1.24826 5.07073 1.61849 5.2841C2.20079 5.62255 2.7795 5.96835 3.35821 6.31047C3.39415 6.33255 3.4301 6.35094 3.49839 6.39141C3.47683 6.03457 3.45885 5.71084 3.44088 5.38343C3.4301 5.22892 3.41572 5.07809 3.41213 4.92358C3.40494 4.51892 3.69249 4.19519 4.07351 4.17679C4.47249 4.1584 4.7924 4.44534 4.82115 4.85736C4.87507 5.60783 4.92899 6.36198 4.97572 7.11244C4.9829 7.23752 5.02963 7.30742 5.13747 7.36628C6.06843 7.91074 6.99221 8.45887 7.91958 9.00701C7.9699 9.03644 8.02022 9.06587 8.09571 9.10633C8.0993 9.0254 8.10649 8.96654 8.10649 8.91136C8.10649 7.81509 8.10289 6.71514 8.11008 5.61887C8.11008 5.48643 8.06695 5.40918 7.95912 5.3356C7.35165 4.9199 6.74419 4.5042 6.14392 4.08115C5.68742 3.76109 5.72336 3.08788 6.20502 2.83405C6.46023 2.70161 6.71543 2.72368 6.95267 2.88555C7.27617 3.10627 7.59967 3.327 7.92317 3.54773C7.9699 3.58083 8.02022 3.61394 8.10649 3.66912C8.10649 3.57348 8.10649 3.50726 8.10649 3.44472C8.10649 2.78254 8.10289 2.12037 8.10649 1.45819C8.11008 0.957879 8.48031 0.62679 8.93321 0.704044C9.24953 0.755547 9.49036 1.02778 9.51552 1.35886C9.51911 1.40669 9.51552 1.45819 9.51552 1.50601C9.51552 7.41778 9.51552 13.3259 9.51552 19.2376C9.51552 19.6349 9.34658 19.9145 9.03745 20.0175C8.56658 20.1794 8.10649 19.8373 8.1029 19.3149C8.0993 18.6454 8.1029 17.9795 8.1029 17.31C8.1029 17.2438 8.1029 17.1812 8.1029 17.0708C7.85128 17.2438 7.63202 17.3909 7.41635 17.5381C7.26179 17.6447 7.11082 17.7514 6.95267 17.8544C6.58963 18.0972 6.16189 18.0236 5.93903 17.6815C5.70899 17.332 5.80604 16.8943 6.17267 16.6404C6.77295 16.2247 7.37322 15.8127 7.9699 15.3933C8.03101 15.3492 8.09571 15.2535 8.09571 15.1836C8.1029 14.0432 8.10289 12.9028 8.0993 11.7624C8.11008 11.7366 8.10649 11.7072 8.0993 11.641Z",fill:"currentColor"}),_.jsx("path",{d:"M19.1595 5.61888C18.9474 5.87639 18.7137 6.11551 18.5268 6.38774C18.2536 6.79241 17.9697 7.20443 17.7648 7.64956C17.4161 8.4037 17.6102 9.11003 18.2501 9.62873C18.8324 10.1033 19.5153 10.3608 20.2198 10.5705C20.3025 10.5962 20.3888 10.6183 20.4211 10.6294C19.8496 10.8869 19.2529 11.1481 18.6634 11.4276C18.4873 11.5123 18.3255 11.641 18.1746 11.7698C17.621 12.237 17.4485 12.8476 17.6749 13.5503C17.8619 14.1389 18.2141 14.6245 18.5987 15.088C18.7641 15.2867 18.9438 15.4743 19.1487 15.6987C18.8935 15.6472 18.6778 15.5957 18.4585 15.5589C17.8906 15.4632 17.3227 15.386 16.744 15.4559C15.9208 15.5589 15.3925 16.0776 15.2774 16.9164C15.1696 17.711 15.3062 18.4798 15.5003 19.2413C15.5111 19.2818 15.5183 19.3223 15.5398 19.4032C15.3421 19.2229 15.1768 19.0648 15.0043 18.9176C14.5657 18.5424 14.1128 18.1929 13.588 17.9574C12.7649 17.5896 12.0496 17.7919 11.5212 18.5387C11.1402 19.0758 10.9066 19.6828 10.7197 20.3118C10.7017 20.367 10.6873 20.4259 10.6514 20.4737C10.6514 19.256 10.6514 18.0421 10.6514 16.8097C12.5744 16.7435 14.156 15.9672 15.3565 14.4295C16.2587 13.2707 16.6901 11.9353 16.6505 10.4528C16.5643 7.06831 13.7965 4.41961 10.6586 4.438C10.6586 3.16515 10.6586 1.8923 10.6586 0.578979C10.6873 0.656233 10.7053 0.700379 10.7161 0.744524C10.9389 1.46556 11.2013 2.1682 11.6434 2.78256C12.1574 3.49256 12.844 3.68753 13.642 3.34541C14.289 3.0695 14.8245 2.63173 15.3206 2.1351C15.3889 2.0652 15.4572 1.99898 15.5255 1.92908C15.5326 1.92173 15.547 1.92173 15.5614 1.91805C15.4967 2.28592 15.4068 2.65012 15.3781 3.018C15.3421 3.49256 15.3134 3.97448 15.3601 4.44536C15.4392 5.24365 15.9748 5.75132 16.7584 5.86168C17.5024 5.96469 18.2249 5.84329 18.9438 5.65567C19.0085 5.63728 19.0696 5.62256 19.1343 5.60785C19.1379 5.60785 19.1451 5.61152 19.1595 5.61888Z",fill:"currentColor"}),_.jsx("path",{d:"M10.6548 15.5332C10.6548 12.2664 10.6548 8.99602 10.6548 5.69617C12.3622 5.7771 13.7424 6.47974 14.6518 7.95493C15.7517 9.73912 15.7266 11.5748 14.6231 13.3553C13.5591 15.0623 11.7008 15.6067 10.6548 15.5332Z",fill:"currentColor"})]}),i1="_card_1oj7o_1",o1="_card__title_1oj7o_8",r1="_route_1oj7o_15",l1="_buttons_1oj7o_25",d1="_route__train_1oj7o_31",v1="_train_1oj7o_36",h1="_train__route_1oj7o_44",u1="_train__info_1oj7o_58",C1="_card__sircle_1oj7o_64",x1="_card__train_route_1oj7o_75",p1="_card__train_number_1oj7o_85",m1="_duration_1oj7o_92",j1="_duration__text_1oj7o_101",f1="_card__tickets__variant_1oj7o_106",g1="_card__total__price_1oj7o_123",b1="_total__price_text_1oj7o_130",y1="_total__price_valute_1oj7o_136",N1="_card__button_1oj7o_142",k1="_buttons__reverse_1oj7o_147",w1="_reverse__svg_1oj7o_151",v={card:i1,card__title:o1,route:r1,buttons:l1,route__train:d1,train:v1,train__route:h1,train__info:u1,card__sircle:C1,card__train_route:x1,card__train_number:p1,duration:m1,duration__text:j1,card__tickets__variant:f1,card__total__price:g1,total__price_text:b1,total__price_valute:y1,card__button:N1,buttons__reverse:k1,reverse__svg:w1},P1=e=>{const t=R().startOf("day").add(e,"second"),o=t.minute(),c=t.hour(),s=r=>r%10===1&&r%100!==11?"час":r%10>=2&&r%10<=4?"часа":"часов",d=r=>r%10===1&&r%100!==11?"минута":r%10>=2&&r%10<=4?"минуты":"минут";return _.jsxs(_.Fragment,{children:[_.jsxs("span",{children:[c," ",s(c)]}),_.jsxs("span",{children:[o," ",d(o)]})]})},S1=()=>{const[e,t]=g.useState(!1),[o,c]=g.useState(void 0),s=I(),d=L(),{ticket:r}=w(h=>h.tickets),{countTicketPlace:i,selectedPlace:l,selectedService:n}=w(h=>h.seats),{id:j}=W(),b=(h,y,A)=>{const $=Number(y.find(p=>p.age==="Взрослый"&&p.seat)?.count||0),O=Number(y.find(p=>p.age==="Детский"&&p.seat)?.count||0),E=h.slice(0,$).reduce((p,N)=>p+N.price,0),z=h.slice($,$+O).reduce((p,N)=>p+N.price,0)*.5,B=A.reduce((p,N)=>p+(N.price?N.price:0),0);return{adultPrice:E,childPrice:z,servicePrice:B}};g.useEffect(()=>{t(!0),D({method:"GET",url:`/routes/${j}/seats`}).then(h=>{c(Array.isArray(h)?h:h.seats??[])}).finally(()=>{t(!1)})},[j]),g.useEffect(()=>{const h=b(l.departurePlace,i,n.departureService);s(F({price:h,routePrice:"departure"}));const y=b(l.arrivalPlace,i,n.arrivalService);s(F({price:y,routePrice:"arrival"}))},[i,l,n]);const M=()=>{d(`/catalog/${j}/passengers`)},x=i.reduce((h,y)=>y.seat?h+Number(y.count):h,0)===l.departurePlace.length&&(!r?.arrival||l.arrivalPlace.length)?"button__fill_white":"button__nonactive";return _.jsxs("div",{className:v.card,children:[_.jsx("h3",{className:v.card__title,children:"Выбор мест"}),_.jsx(T,{ticket:r,route:"departure",seats:o,isloading:e,selectedPlace:l.departurePlace}),r?.arrival?_.jsx(T,{ticket:r,route:"arrival",seats:o,isloading:e,selectedPlace:l.arrivalPlace}):null,_.jsx("div",{className:v.card__button,children:_.jsx(Z,{onClick:M,type:"button",className:x,children:"Далее"})})]})},T=({ticket:e,route:t,seats:o,isloading:c,selectedPlace:s})=>{const[d,r]=g.useState(void 0),{totalPrice:i}=w(n=>n.tickets),l=L();return _.jsx("div",{className:v.card__routes,children:_.jsxs("div",{className:v.route,children:[_.jsxs("div",{className:u(v.buttons,{[v.buttons__reverse]:t==="arrival"}),children:[_.jsx(Z,{className:"button__fill_small",type:"button",children:_.jsx("div",{className:u({[v.reverse__svg]:t==="arrival"}),children:_.jsx(H,{})})}),_.jsx(Z,{onClick:()=>l(-1),className:"button__outline_big_black",type:"button",children:"Выбрать другой поезд"})]}),_.jsxs("div",{className:v.route__train,children:[_.jsxs("div",{className:v.train,children:[_.jsx("div",{className:v.card__sircle,children:_.jsx(e1,{size:{width:"15",height:"18"}})}),_.jsxs("div",{className:v.train__info,children:[_.jsx("h3",{className:v.card__train_number,children:e?.[t]?.train.name.includes("undefined")?"Не найден":e?.departure.train.name}),_.jsxs("div",{className:v.card__train_route,children:[_.jsxs("span",{children:[e?.[t]?.from.city.name," →"]}),_.jsx("span",{children:e?.[t]?.to.city.name})]})]})]}),_.jsx("div",{className:v.train__route,children:_.jsx(t1,{route:e?.[t]})}),_.jsxs("div",{className:v.duration,children:[_.jsx(n1,{size:{width:"30",height:"30"}}),_.jsx("div",{className:v.duration__text,children:P1(e?.[t]?.duration??0)})]})]}),_.jsx("div",{className:v.card__tickets__variant,children:_.jsx(O1,{})}),_.jsx("div",{children:_.jsx(q1,{activeType:d,setActiveType:r})}),_.jsx("div",{children:c?_.jsx("div",{children:"Загрузка мест"}):_.jsx(n_,{seats:o,route:t,activeType:d})}),_.jsx("div",{className:v.card__total__price,children:s.length>=1&&_.jsxs(_.Fragment,{children:[_.jsx("span",{className:v.total__price_text,children:(i[`${t}Price`].adultPrice+i[`${t}Price`].childPrice+i[`${t}Price`].servicePrice).toLocaleString()}),_.jsx("span",{className:v.total__price_valute,children:"₽"})]})})]})})},I1="_count__tickets_1753a_1",M1="_tickets__variant_title_1753a_7",$1="_tickets__box_1753a_14",Z1="_tickets__box_shadow_1753a_26",F1="_count__box_1753a_30",T1="_input_1753a_38",L1="_ticket__info_1753a_52",V1="_ticket_1753a_7",A1="_ticket__info_child_1753a_66",f={count__tickets:I1,tickets__variant_title:M1,tickets__box:$1,tickets__box_shadow:Z1,count__box:F1,input:T1,ticket__info:L1,ticket:V1,ticket__info_child:A1},O1=()=>{const{countTicketPlace:e}=w(t=>t.seats);return _.jsxs("div",{className:f.count__tickets,children:[_.jsx("h3",{className:f.tickets__variant_title,children:"Количество билетов"}),_.jsx("div",{className:f.ticket,children:e.map((t,o)=>_.jsx(E1,{ticket:t},o))})]})},E1=({ticket:e})=>{const t=I(),o=s=>{Number(s.target.value)<0||Number(s.target.value)>e.maxCount||t(q({age:e.age,value:s.target.value,seat:e.seat}))},c=()=>{if(e.age==="Взрослый")return _.jsxs("p",{className:f.ticket__info,children:["Можно добавить еще ",e.maxCount-Number(e.count)," пассажиров"]});if(e.age==="Детский"&&e.seat)return _.jsxs("p",{className:u(f.ticket__info,f.ticket__info_child),children:["Можно добавить еще ",e.maxCount-Number(e.count)," детей до 10 лет. Свое место в вагоне, как у взрослых, но дешевле в среднем на 50-65%"]})};return _.jsxs("div",{className:u(f.tickets__box,{[f.tickets__box_shadow]:e.count!=="0"}),children:[_.jsxs("div",{className:f.count__box,children:[_.jsxs("span",{children:[e.age," ",!e.seat&&"«без места»"," -"]}),_.jsx("input",{className:f.input,type:"number",onChange:s=>o(s),value:e.count})]}),c()]})},z1="_vantype__title_jzlnj_1",B1="_vantype_jzlnj_1",R1="_vantype__service_svg_jzlnj_14",W1="_vantype__services_jzlnj_20",D1="_vantype__service_jzlnj_14",H1="_vantype__service_active_jzlnj_53",k={vantype__title:z1,vantype:B1,vantype__service_svg:R1,vantype__services:W1,vantype__service:D1,vantype__service_active:H1},q1=({activeType:e,setActiveType:t})=>{const o=[{title:"Сидячий",type:"fourth",component:_.jsx(U,{size:{width:"30",height:"50"}})},{title:"Плацкарт",type:"third",component:_.jsx(Y,{size:{width:"50",height:"50"}})},{title:"Купе",type:"second",component:_.jsx(J,{size:{width:"50",height:"50"}})},{title:"Люкс",type:"first",component:_.jsx(K,{size:{width:"56",height:"50"}})}];return _.jsxs("div",{className:k.vantype,children:[_.jsx("h3",{className:k.vantype__title,children:"Тип вагона"}),_.jsx("div",{className:k.vantype__services,children:o.map((c,s)=>_.jsxs("div",{className:u(k.vantype__service,{[k.vantype__service_active]:e===c.type}),"data-type":c.type,onClick:()=>t(c.type),children:[_.jsx("div",{className:k.vantype__service_svg,children:c.component}),_.jsx("span",{children:c.title})]},s))})]})},G1="_van__seats_1ypna_1",Q1="_van__seats_numerical_1ypna_5",U1="_van__numerical__title_1ypna_14",Y1="_van__numerical__text_1ypna_25",J1="_van__number_1ypna_40",K1="_van__number__count_title_1ypna_49",X1="_van__number__count_text_1ypna_62",__="_van__count_text_active_1ypna_69",e_="_van__number__count_text_small_1ypna_73",t_="_van__number_count_1ypna_83",C={van__seats:G1,van__seats_numerical:Q1,van__numerical__title:U1,van__numerical__text:Y1,van__number:J1,van__number__count_title:K1,van__number__count_text:X1,van__count_text_active:__,van__number__count_text_small:e_,van__number_count:t_},n_=({seats:e,activeType:t,route:o})=>{const[c,s]=g.useState(0);if(!e)return null;const d=e?.filter(i=>i.coach.class_type===t),r=i=>{s(i)};return _.jsxs(_.Fragment,{children:[d.length>=1&&_.jsx(s_,{vans:d,activeVanIndex:c,onClick:r,seats:e}),d.map((i,l)=>{const n=String(e.indexOf(i)+1).padStart(2,"0");return c===l&&_.jsxs("div",{className:C.van,children:[_.jsxs("div",{className:C.van__seats,children:[_.jsxs("div",{className:C.van__seats_numerical,children:[_.jsx("span",{className:C.van__numerical__title,children:n}),_.jsx("span",{className:C.van__numerical__text,children:"вагон"})]}),_.jsx(y_,{seat:i,route:o})]},i.coach._id),_.jsx("div",{className:C.places,children:_.jsx(A_,{places:i,route:o})})]},l)})]})},s_=({vans:e,activeVanIndex:t,seats:o,onClick:c})=>_.jsxs("div",{className:C.van__number,children:[_.jsxs("div",{className:C.van__number__count_title,children:["Вагоны"," ",_.jsx("div",{className:C.van__number_count,children:e.map((s,d)=>{const r=String(o.indexOf(s)+1).padStart(2,"0");return _.jsx("span",{className:u(C.van__number__count_text,{[C.van__count_text_active]:t===d}),onClick:()=>c(d),children:r},s.coach._id)})})]}),_.jsx("p",{className:C.van__number__count_text_small,children:"Нумерация вагонов начинается с головы поезда"})]}),a_="_van__info_1unky_1",c_="_van__info__header_text_1unky_7",i_="_van__info__header_text_black_1unky_15",o_="_van__info_text_1unky_19",r_="_van__info_text_bold_1unky_27",l_="_van__info_text_gray_1unky_31",d_="_van__info__header_text_gray_1unky_35",v_="_van__info__header__box_1unky_40",h_="_van__info__container_1unky_45",u_="_van__info__service__box_1unky_50",C_="_van__info__count_places_1unky_61",x_="_van__info__inner_1unky_68",p_="_van__seats_info_1unky_74",m_="_van__info__service_tip_1unky_86",j_="_van__info__service_tip_active_1unky_101",f_="_van__info_service_1unky_105",g_="_van__info__service__box_selected_1unky_109",b_="_service__noactive_1unky_115",a={van__info:a_,van__info__header_text:c_,van__info__header_text_black:i_,van__info_text:o_,van__info_text_bold:r_,van__info_text_gray:l_,van__info__header_text_gray:d_,van__info__header__box:v_,van__info__container:h_,van__info__service__box:u_,van__info__count_places:C_,van__info__inner:x_,van__seats_info:p_,van__info__service_tip:m_,van__info__service_tip_active:j_,van__info_service:f_,van__info__service__box_selected:g_,service__noactive:b_},y_=({seat:e,route:t})=>{const[o,c]=g.useState({tip:"",show:!1}),s=w(n=>n.seats.selectedService),d=I(),r=n=>{c({tip:n,show:!0})},i=n=>{c({tip:n,show:!1})},l=(n,j,b)=>{d(G({selectedService:{_id:j,service:n,price:b},route:t}))};return _.jsxs("div",{className:a.van__seats_info,children:[_.jsx(N_,{seat:e}),_.jsx(k_,{seat:e}),_.jsx(w_,{onMouseEnter:r,onMouseLeave:i,onClick:l,showTooltip:o,selectedService:s[`${t}Service`],seat:e})]})},N_=({seat:e})=>{const t=e.seats.filter(s=>s.available).length,o=e.seats.filter(s=>s.available&&s.index%2===1).length,c=e.seats.filter(s=>s.available&&s.index%2===0).length;return _.jsxs("div",{className:a.van__info,children:[_.jsxs("p",{className:a.van__info__header_text,children:["Места",_.jsx("span",{className:a.van__info__header_text_black,children:t})]}),e.coach.class_type==="third"||e.coach.class_type==="second"?_.jsxs(_.Fragment,{children:[_.jsxs("p",{className:a.van__info_text,children:["Верхние",_.jsx("span",{className:a.van__info_text_bold,children:o})]}),_.jsxs("p",{className:a.van__info_text,children:["Нижние",_.jsx("span",{className:a.van__info_text_bold,children:c})]})]}):null]})},k_=({seat:e})=>_.jsxs("div",{className:a.van__info,children:[_.jsx("p",{className:a.van__info__header_text,children:"Стоимость"}),_.jsx(P_,{seat:e})]}),w_=({showTooltip:e,seat:t,selectedService:o,onClick:c,onMouseEnter:s,onMouseLeave:d})=>{const r=[{component:_.jsx(c1,{size:{width:"20",height:"20"}}),tip:"кондиционер",have:t.coach.have_air_conditioning},{component:_.jsx(X,{size:{width:"20",height:"16"}}),tip:"WI-FI",have:t.coach.have_wifi,price:t.coach.wifi_price},{component:_.jsx(s1,{size:{width:"22",height:"16"}}),tip:"белье",have:!0,is_included:t.coach.is_linens_included,price:t.coach.linens_price},{component:_.jsx(a1,{size:{width:"20",height:"18"}}),tip:"питание",have:!0}];return _.jsxs("div",{className:u(a.van__info,a.van__info_service),children:[_.jsxs("div",{className:a.van__info__inner,children:[_.jsxs("div",{className:a.van__info__header__box,children:[_.jsx("p",{className:a.van__info__header_text,children:"Обслуживание"}),_.jsx("p",{className:u(a.van__info__header_text,a.van__info__header_text_gray),children:"фпк"})]}),_.jsx("div",{className:a.van__info__container,children:r.map((i,l)=>{const n=o.some(j=>j._id===t.coach._id&&j.service===i.tip);return i.have&&_.jsxs("div",{className:u(a.van__info__service__box,{[a.van__info__service__box_selected]:n},{[a.service__noactive]:i.is_included}),onClick:()=>c(i.tip,t.coach._id,i.price),onMouseEnter:()=>s(i.tip),onMouseLeave:()=>d(i.tip),children:[_.jsx("div",{className:a.van__info__service_svg,children:i.component}),_.jsx("p",{className:u(a.van__info__service_tip,{[a.van__info__service_tip_active]:e.tip===i.tip&&e.show}),children:i.tip})]},l)})})]}),_.jsx("div",{className:a.van__info__count_places,children:_.jsx("span",{children:"13 человек выбирают места в этом поезде"})})]})},P_=({seat:e})=>e.coach.class_type==="third"||e.coach.class_type==="second"?_.jsxs(_.Fragment,{children:[_.jsxs("p",{className:a.van__info_text,children:[_.jsx("span",{className:a.van__info_text_bold,children:e.coach.top_price.toLocaleString()}),_.jsx("span",{className:a.van__info_text_gray,children:"₽"})]}),_.jsxs("p",{className:a.van__info_text,children:[_.jsx("span",{className:a.van__info_text_bold,children:e.coach.bottom_price.toLocaleString()}),_.jsx("span",{className:a.van__info_text_gray,children:"₽"})]})]}):_.jsx(_.Fragment,{children:_.jsxs("p",{className:a.van__info_text,children:[_.jsx("span",{className:a.van__info_text_bold,children:e.coach.class_type==="first"?e.coach.price.toLocaleString():e.coach.bottom_price.toLocaleString()}),_.jsx("span",{className:a.van__info_text_gray,children:"₽"})]})}),S_="_seats_krwam_1",I_="_seats__place_krwam_11",M_="_place__big_room_krwam_17",$_="_big_room__seat_krwam_24",Z_="_big_room__seat_luxe_krwam_30",F_="_place__big_room_luxe_krwam_38",T_="_big_room__seat_sidewall_krwam_42",L_="_seat__close_krwam_69",V_="_seat__selected_krwam_75",m={seats:S_,seats__place:I_,place__big_room:M_,big_room__seat:$_,big_room__seat_luxe:Z_,place__big_room_luxe:F_,big_room__seat_sidewall:T_,seat__close:L_,seat__selected:V_},A_=({places:e,route:t})=>{const{selectedPlace:o}=w(l=>l.seats),c=I(),s=(l,n)=>{l%2===0&&(n.coach.class_type==="third"||n.coach.class_type==="second")?c(P({seat:{_id:n.coach._id,index:l,class_type:n.coach.class_type,price:n.coach.top_price},route:t})):l%2===1&&(n.coach.class_type==="third"||n.coach.class_type==="second")&&c(P({seat:{_id:n.coach._id,index:l,class_type:n.coach.class_type,price:n.coach.bottom_price},route:t})),n.coach.class_type==="first"&&c(P({seat:{_id:n.coach._id,index:l,class_type:n.coach.class_type,price:n.coach.price},route:t})),n.coach.class_type==="fourth"&&c(P({seat:{_id:n.coach._id,index:l,class_type:n.coach.class_type,price:n.coach.bottom_price},route:t}))},d=(l,n,j,b)=>{const M=Math.ceil(l.length/n);return Array.from({length:M},(x,h)=>l.slice(h*n,h*n+n)).map((x,h)=>_.jsxs("div",{className:u(m.place__big_room,{[m.place__big_room_luxe]:b}),children:[_.jsxs("div",{className:u(m.big_room__seat,{[m.big_room__seat_sidewall]:j},{[m.big_room__seat_luxe]:b}),children:[_.jsx(S,{item:x,startIndex:0,onClick:()=>s(x[0].index,e),place:e,selectedPlace:o[`${t}Place`]}),_.jsx(S,{item:x,startIndex:1,onClick:()=>s(x[1].index,e),place:e,selectedPlace:o[`${t}Place`]})]}),n==2?null:_.jsxs("div",{className:m.big_room__seat,children:[_.jsx(S,{item:x,startIndex:2,onClick:()=>s(x[2].index,e),place:e,selectedPlace:o[`${t}Place`]}),_.jsx(S,{item:x,startIndex:3,onClick:()=>s(x[3].index,e),place:e,selectedPlace:o[`${t}Place`]})]})]},h))},r=e.seats.filter((l,n)=>n<32),i=e.seats.filter((l,n)=>n>=32);return _.jsxs("div",{className:m.seats,children:[_.jsx("div",{className:m.seats__place,children:e.coach.class_type==="first"?d(r,2,!1,!0):d(r,4)}),_.jsx("div",{className:m.seats__place,children:e.coach.class_type==="fourth"?d(i,4):d(i,2,!0)})]})},S=({item:e,startIndex:t,place:o,selectedPlace:c,onClick:s})=>{if(!e[t])return null;const d=c.some(r=>r.index===e[t].index&&r._id===o.coach._id);return e[t]&&_.jsx("p",{className:u({[m.seat__close]:e[t].available===!1,[m.seat__selected]:d}),onClick:s,children:e[t].index})},O_="_section_865i5_1",E_={section:O_},W_=()=>{const{handleSetValue:e}=Q();return g.useEffect(()=>{e(1)},[]),_.jsx("div",{className:"container",children:_.jsxs("section",{className:E_.section,children:[_.jsx(_1,{}),_.jsx(S1,{})]})})};export{W_ as default};
